(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{124:function(e,t,a){"use strict";var n=a(23),r=a.n(n),i=a(14),l=a.n(i),o=a(16);t.a=function(e){var t=JSON.parse(localStorage.getItem("react-redux-user-data")),a=!l()(t)&&t.data.id;return r.a.get("".concat(o.a,"/").concat(o.b,"/users/").concat(e),{headers:{Authorization:a}})}},160:function(e,t,a){},168:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(122),l=a(169),o=a(151),c=a.n(o),m=a(165),d=a(119),u=a(120),s=a(124),g=a(23),f=a.n(g),h=a(14),p=a.n(h),E=a(16),b=function(e){var t=JSON.parse(localStorage.getItem("react-redux-user-data")),a=!p()(t)&&t.data.id,n=e.id,r=e.name,i=e.surname,l=e.email,o=e.job_title,c=e.emailVerified,m=e.admin,d=e.status,u=e.image,s=e.emailSettings,g=e.emailJobApplication,h=e.emailMarketing,b=e.resData,_=b.experience,y=b.skills,v=b.seniority_id,S=b.location_id,k=b.user_role_id,C=b.role_id,x=b.company_id;return f.a.patch("".concat(E.a,"/").concat(E.b,"/users/").concat(n),{name:r,surname:i,email:l,job_title:o,emailVerified:c,admin:m,status:d,experience:_,image:u,skills:y,emailSettings:s,emailJobApplication:g,emailMarketing:h,seniority_id:v,location_id:S,user_role_id:k,role_id:C,company_id:x,modified:"".concat((new Date).toISOString())},{headers:{Authorization:a}})},_=function(e){var t=JSON.parse(localStorage.getItem("react-redux-user-data")),a=!p()(t)&&t.data.id;return f.a.delete("".concat(E.a,"/").concat(E.b,"/users/").concat(e),{headers:{Authorization:a}})},y=a(143),v=a(121),S=a(148),k=a(149),C=a(144),x=a(145),L=a(146),O=function(e){var t=e.name,a=e.email,n=e.surname,i=e.job_title,l=e.status,o=e.emailVerified,c=e.emailJobApplication,m=e.emailMarketing,s=e.emailSettings,g=e.id,f=e.modified,h=e.created,E=e.lastLogin,b=e.editUserSubmit,_=e.deleteModalOpen,O=e.onChange,M=e.deleteImage,j=e.editLoading,w=e.image,A=e.onChangeImage;return r.a.createElement(y.a,{action:"",method:"post",className:"edit-profile__form",onSubmit:b},r.a.createElement(v.a,null,r.a.createElement("h4",null,"Avatar"),r.a.createElement(S.a,null,r.a.createElement(k.a,{xs:"12"},r.a.createElement(C.a,null,r.a.createElement(x.a,{for:"user-edit__name"},"Paste image url"),r.a.createElement(L.a,{id:"user-edit__image",type:"url",name:"image",value:p()(w)?"":w.url,onChange:A}),!p()(w)&&w.url?r.a.createElement("img",{src:w.url,className:"img-fluid  user-avatar",alt:"Responsive image"}):r.a.createElement("div",{className:"no-image"})),r.a.createElement(d.a,{color:"danger",onClick:M,disabled:!w.url,outline:!0},"Remove image")))),r.a.createElement("hr",null),r.a.createElement(v.a,null,r.a.createElement("h4",null,"Text fields"),r.a.createElement(S.a,null,r.a.createElement(k.a,{xs:"12",md:"6"},r.a.createElement(C.a,null,r.a.createElement(x.a,{for:"user-edit__name"},"Name"),r.a.createElement(L.a,{id:"user-edit__name",type:"text",name:"name",value:t,onChange:O})),r.a.createElement(C.a,null,r.a.createElement(x.a,{for:"user-edit__email"},"Email"),r.a.createElement(L.a,{id:"user-edit__email",type:"text",name:"email",value:a,onChange:O}))),r.a.createElement(k.a,{xs:"12",md:"6"},r.a.createElement(C.a,null,r.a.createElement(x.a,{for:"user-edit__surname"},"Surname"),r.a.createElement(L.a,{id:"user-edit__surname",type:"text",name:"surname",value:n,onChange:O})),r.a.createElement(C.a,null,r.a.createElement(x.a,{for:"user-edit__job_title"},"Job title"),r.a.createElement(L.a,{id:"user-edit__job_title",type:"text",name:"job_title",value:i,onChange:O}))))),r.a.createElement("hr",null),r.a.createElement(v.a,null,r.a.createElement("h4",null,"Statuses"),r.a.createElement(S.a,null,r.a.createElement(k.a,{xs:"12",md:"6"},r.a.createElement(C.a,{check:!0},r.a.createElement(x.a,{check:!0},r.a.createElement(L.a,{name:"status",onChange:O,type:"checkbox",checked:l}),"User activity")),r.a.createElement(C.a,{check:!0},r.a.createElement(x.a,{check:!0},r.a.createElement(L.a,{name:"emailVerified",onChange:O,type:"checkbox",checked:o}),"Email verified"))))),r.a.createElement("hr",null),r.a.createElement(v.a,null,r.a.createElement("h4",null,"Notifications"),r.a.createElement(S.a,null,r.a.createElement(k.a,{xs:"12",md:"6"},r.a.createElement(C.a,{check:!0},r.a.createElement(x.a,{check:!0},r.a.createElement(L.a,{name:"emailJobApplication",onChange:O,type:"checkbox",checked:c}),"Email Job Application")),r.a.createElement(C.a,{check:!0},r.a.createElement(x.a,{check:!0},r.a.createElement(L.a,{name:"emailMarketing",onChange:O,type:"checkbox",checked:m}),"Email marketing")),r.a.createElement(C.a,{check:!0},r.a.createElement(x.a,{check:!0},r.a.createElement(L.a,{name:"emailSettings",onChange:O,type:"checkbox",checked:s}),"Email settings"))))),r.a.createElement("hr",null),r.a.createElement(v.a,null,r.a.createElement("h4",null,"Not editable"),r.a.createElement(S.a,null,r.a.createElement(k.a,{xs:"12",md:"6"},r.a.createElement(C.a,null,r.a.createElement(x.a,{for:"user-edit__id"},"Id"),r.a.createElement(L.a,{disabled:!0,id:"user-edit__id",type:"number",name:"id",value:g,onChange:O})),r.a.createElement(C.a,null,r.a.createElement(x.a,{for:"user-edit__modified"},"Modified"),r.a.createElement(L.a,{disabled:!0,id:"user-edit__modified",type:"data",name:"modified",value:f,onChange:O}))),r.a.createElement(k.a,{xs:"12",md:"6"},r.a.createElement(C.a,null,r.a.createElement(x.a,{for:"user-edit__created"},"Created"),r.a.createElement(L.a,{disabled:!0,id:"user-edit__created",type:"data",name:"created",value:h,onChange:O})),r.a.createElement(C.a,null,r.a.createElement(x.a,{for:"user-edit__lastLogin"},"Last login"),r.a.createElement(L.a,{disabled:!0,id:"user-edit__lastLogin",type:"data",name:"lastLogin",value:E,onChange:O})))),r.a.createElement("hr",null),r.a.createElement("div",{className:"edit-profile__btns"},r.a.createElement(d.a,{color:"primary",type:"submit"},j?r.a.createElement(u.a,null):"Save changes"),r.a.createElement(d.a,{color:"danger",onClick:_,outline:!0},"Delete user"))))};a(160);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=R(e);if(t){var r=R(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return J(this,a)}}function J(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?N(e):t}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(g,e);var t,a,n,o=I(g);function g(){var e,t;j(this,g);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return V(N(t=o.call.apply(o,[this].concat(n))),"state",(V(e={getLoading:!1,editLoading:!1,deleteLoading:!1,error:!1,errorText:"",deleteModal:!1,id:"",name:"",surname:"",email:"",job_title:"",admin:!0,status:!0,created:"",modified:"",lastLogin:"",image:"",resData:{},emailVerified:!1},"status",!1),V(e,"emailJobApplication",!1),V(e,"emailMarketing",!1),V(e,"emailSettings",!1),V(e,"image",{url:"",icon:"",color:""}),e)),V(N(t),"catchErrors",(function(e){401===e.response.status?(localStorage.removeItem("react-redux-user-data"),t.props.history.push("/login")):(console.log(e),t.setState({getLoading:!1,editLoading:!1,deleteLoading:!1,error:!0,errorText:e}))})),V(N(t),"closeAlert",(function(){return t.setState({error:!1})})),V(N(t),"editUserSubmit",(function(e){e.preventDefault();var a=N(t).state;t.props.history.push("/profile-show"),t.setState({editLoading:!0}),b(a).then((function(){t.setState({editLoading:!1})})).catch((function(e){t.catchErrors(e)}))})),V(N(t),"deleteModalClose",(function(){return t.setState({deleteModal:!1})})),V(N(t),"deleteModalOpen",(function(){return t.setState({deleteModal:!0})})),V(N(t),"deleteUserSubmit",(function(){t.setState({deleteLoading:!0});var e=t.state.id;_(e).then((function(){t.setState({deleteLoading:!1}),localStorage.removeItem("react-redux-user-data"),t.props.history.push("/login")})).catch((function(e){return t.catchErrors(e)}))})),V(N(t),"onChange",(function(e){var a,n;"checkbox"===e.target.type?t.setState((V(a={},e.target.name,e.target.checked),V(a,"error",!1),a)):t.setState((V(n={},e.target.name,e.target.value),V(n,"error",!1),n))})),V(N(t),"onChangeCheckbox",(function(e){var a,n=e.target.checked;t.setState((V(a={},e.target.name,!n),V(a,"error",!1),a))})),V(N(t),"onChangeImage",(function(e){return t.setState({image:{url:e.target.value}})})),V(N(t),"deleteImage",(function(){t.setState({image:{url:"",icon:"",color:""}})})),t}return t=g,(a=[{key:"componentDidMount",value:function(){var e,t=this,a=JSON.parse(localStorage.getItem("react-redux-user-data")),n=null==a||null===(e=a.data)||void 0===e?void 0:e.userId;this.setState({getLoading:!0}),Object(s.a)(n).then((function(e){var a;t.setState((V(a={getLoading:!1,id:e.data.id,name:e.data.name,surname:e.data.surname,email:e.data.email,job_title:e.data.job_title,image:e.data.image,created:e.data.created,modified:e.data.modified,lastLogin:e.data.lastLogin,emailVerified:e.data.emailVerified,emailJobApplication:e.data.emailJobApplication,emailMarketing:e.data.emailMarketing},"emailVerified",e.data.emailVerified),V(a,"emailSettings",e.data.emailSettings),V(a,"status",e.data.status),V(a,"resData",e.data),a))})).catch((function(e){t.catchErrors(e)}))}},{key:"render",value:function(){var e=this.state,t=e.getLoading,a=e.editLoading,n=e.deleteLoading,o=e.error,s=e.errorText,g=e.deleteModal,f=e.id,h=e.name,p=e.surname,E=e.email,b=e.job_title,_=e.created,y=e.modified,v=e.lastLogin,S=e.emailVerified,k=e.status,C=e.emailJobApplication,x=e.emailMarketing,L=e.emailSettings,M=e.image;return r.a.createElement("div",{className:"edit-profile"},r.a.createElement(i.a,null,r.a.createElement("title",null,"React-Redux | Edit Profile")),r.a.createElement(l.a,{color:"danger",isOpen:o,toggle:this.closeAlert},"".concat(s)||""),r.a.createElement(c.a,{className:"delete-modal",overlayClassName:"delete-modal__overlay",isOpen:g,onRequestClose:this.deleteModalClose},n?r.a.createElement(u.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Are you sure?"),r.a.createElement(m.a,null,r.a.createElement(d.a,{color:"secondary",onClick:this.deleteModalClose},"Cancel"),r.a.createElement(d.a,{color:"danger",onClick:this.deleteUserSubmit},"Delete")))),r.a.createElement("h1",null,"Edit profile"),t?"Loading...":r.a.createElement(O,{editLoading:a,id:f,name:h,email:E,image:M,surname:p,created:_,modified:y,job_title:b,lastLogin:v,status:k,emailVerified:S,emailSettings:L,emailMarketing:x,emailJobApplication:C,onChange:this.onChange,deleteModalOpen:this.deleteModalOpen,editUserSubmit:this.editUserSubmit,onChangeImage:this.onChangeImage,deleteImage:this.deleteImage}))}}])&&w(t.prototype,a),n&&w(t,n),g}(n.Component);t.default=D}}]);