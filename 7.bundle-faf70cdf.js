(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{167:function(e,a,t){},175:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(129),i=t(176),o=t(158),c=t.n(o),m=t(172),d=t(126),u=t(127),s=t(1),g=t.n(s),f=t(28),p=t.n(f),h=t(17),E=t.n(h),b=t(29),_=function(e){var a=JSON.parse(localStorage.getItem("react-redux-user-data")),t=!E()(a)&&a.data.id;return p.a.get("".concat(b.a,"/users/").concat(e),{headers:{Authorization:t}})},y=function(e,a){var t=JSON.parse(localStorage.getItem("react-redux-user-data")),n=!E()(t)&&t.data.id,r=e.id,l=e.name,i=e.surname,o=e.email,c=e.job_title,m=e.emailVerified,d=e.status,u=e.image,s=e.emailSettings,g=e.emailJobApplication,f=e.emailMarketing,h=a.experience,_=a.skills,y=a.seniority_id,v=a.location_id,S=a.user_role_id,k=a.role_id,x=a.company_id;return p.a.patch("".concat(b.a,"/users/").concat(r),{name:l,surname:i,email:o,job_title:c,emailVerified:m,admin:!0,status:d,experience:h,image:u,skills:_,emailSettings:s,emailJobApplication:g,emailMarketing:f,seniority_id:y,location_id:v,user_role_id:S,role_id:k,company_id:x,modified:"".concat((new Date).toISOString())},{headers:{Authorization:n}})},v=function(e){var a=JSON.parse(localStorage.getItem("react-redux-user-data")),t=!E()(a)&&a.data.id;return p.a.delete("".concat(b.a,"/users/").concat(e),{headers:{Authorization:t}})},S=t(135),k=t(128),x=t(139),C=t(140),L=t(136),I=t(137),M=t(138),O=function(e){var a=e.name,t=e.email,n=e.surname,l=e.job_title,i=e.status,o=e.emailVerified,c=e.emailJobApplication,m=e.emailMarketing,s=e.emailSettings,g=e.id,f=e.modified,p=e.created,h=e.lastLogin,b=e.editUserSubmit,_=e.deleteModalOpen,y=e.onChange,v=e.deleteImage,O=e.editLoading,j=e.image,A=e.onChangeImage;return r.a.createElement(S.a,{action:"",method:"post",className:"edit-profile__form",onSubmit:b},r.a.createElement(k.a,null,r.a.createElement("h4",null,"Avatar"),r.a.createElement(x.a,null,r.a.createElement(C.a,{xs:"12"},r.a.createElement(L.a,null,r.a.createElement(I.a,{for:"user-edit__name"},"Paste image url"),r.a.createElement(M.a,{id:"user-edit__image",type:"url",name:"image",value:E()(j)?"":j.url,onChange:A}),!E()(j)&&j.url?r.a.createElement("img",{src:j.url,className:"img-fluid  user-avatar",alt:"Responsive image"}):r.a.createElement("div",{className:"no-image"})),r.a.createElement(d.a,{color:"danger",onClick:v,disabled:!j.url,outline:!0},"Remove image")))),r.a.createElement("hr",null),r.a.createElement(k.a,null,r.a.createElement("h4",null,"Text fields"),r.a.createElement(x.a,null,r.a.createElement(C.a,{xs:"12",md:"6"},r.a.createElement(L.a,null,r.a.createElement(I.a,{for:"user-edit__name"},"Name"),r.a.createElement(M.a,{id:"user-edit__name",type:"text",name:"name",value:a,onChange:y})),r.a.createElement(L.a,null,r.a.createElement(I.a,{for:"user-edit__email"},"Email"),r.a.createElement(M.a,{id:"user-edit__email",type:"text",name:"email",value:t,onChange:y}))),r.a.createElement(C.a,{xs:"12",md:"6"},r.a.createElement(L.a,null,r.a.createElement(I.a,{for:"user-edit__surname"},"Surname"),r.a.createElement(M.a,{id:"user-edit__surname",type:"text",name:"surname",value:n,onChange:y})),r.a.createElement(L.a,null,r.a.createElement(I.a,{for:"user-edit__job_title"},"Job title"),r.a.createElement(M.a,{id:"user-edit__job_title",type:"text",name:"job_title",value:l,onChange:y}))))),r.a.createElement("hr",null),r.a.createElement(k.a,null,r.a.createElement("h4",null,"Statuses"),r.a.createElement(x.a,null,r.a.createElement(C.a,{xs:"12",md:"6"},r.a.createElement(L.a,{check:!0},r.a.createElement(I.a,{check:!0},r.a.createElement(M.a,{name:"status",onChange:y,type:"checkbox",checked:i}),"User activity")),r.a.createElement(L.a,{check:!0},r.a.createElement(I.a,{check:!0},r.a.createElement(M.a,{name:"emailVerified",onChange:y,type:"checkbox",checked:o}),"Email verified"))))),r.a.createElement("hr",null),r.a.createElement(k.a,null,r.a.createElement("h4",null,"Notifications"),r.a.createElement(x.a,null,r.a.createElement(C.a,{xs:"12",md:"6"},r.a.createElement(L.a,{check:!0},r.a.createElement(I.a,{check:!0},r.a.createElement(M.a,{name:"emailJobApplication",onChange:y,type:"checkbox",checked:c}),"Email job application")),r.a.createElement(L.a,{check:!0},r.a.createElement(I.a,{check:!0},r.a.createElement(M.a,{name:"emailMarketing",onChange:y,type:"checkbox",checked:m}),"Email marketing")),r.a.createElement(L.a,{check:!0},r.a.createElement(I.a,{check:!0},r.a.createElement(M.a,{name:"emailSettings",onChange:y,type:"checkbox",checked:s}),"Email settings"))))),r.a.createElement("hr",null),r.a.createElement(k.a,null,r.a.createElement("h4",null,"Not editable"),r.a.createElement(x.a,null,r.a.createElement(C.a,{xs:"12",md:"6"},r.a.createElement(L.a,null,r.a.createElement(I.a,{for:"user-edit__id"},"Id"),r.a.createElement(M.a,{disabled:!0,id:"user-edit__id",type:"number",name:"id",value:g,onChange:y})),r.a.createElement(L.a,null,r.a.createElement(I.a,{for:"user-edit__modified"},"Modified"),r.a.createElement(M.a,{disabled:!0,id:"user-edit__modified",type:"data",name:"modified",value:f,onChange:y}))),r.a.createElement(C.a,{xs:"12",md:"6"},r.a.createElement(L.a,null,r.a.createElement(I.a,{for:"user-edit__created"},"Created"),r.a.createElement(M.a,{disabled:!0,id:"user-edit__created",type:"data",name:"created",value:p,onChange:y})),r.a.createElement(L.a,null,r.a.createElement(I.a,{for:"user-edit__lastLogin"},"Last login"),r.a.createElement(M.a,{disabled:!0,id:"user-edit__lastLogin",type:"data",name:"lastLogin",value:h,onChange:y})))),r.a.createElement("hr",null),r.a.createElement("div",{className:"edit-profile__btns"},r.a.createElement(d.a,{color:"primary",type:"submit"},O?r.a.createElement(u.a,null):"Save changes"),r.a.createElement(d.a,{color:"danger",onClick:_,outline:!0},"Delete user"))))};O.propTypes={name:g.a.string,email:g.a.string,surname:g.a.string,job_title:g.a.string,status:g.a.bool,emailVerified:g.a.bool,emailJobApplication:g.a.bool,emailMarketing:g.a.bool,emailSettings:g.a.bool,id:g.a.oneOfType([g.a.string,g.a.number]),modified:g.a.string,created:g.a.string,lastLogin:g.a.string,editUserSubmit:g.a.func,deleteModalOpen:g.a.func,onChange:g.a.func,deleteImage:g.a.func,editLoading:g.a.bool,image:g.a.object,onChangeImage:g.a.func};var j=O;t(167);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function J(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e,a){return(N=Object.setPrototypeOf||function(e,a){return e.__proto__=a,e})(e,a)}function R(e){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=V(e);if(a){var r=V(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return D(this,t)}}function D(e,a){return!a||"object"!==A(a)&&"function"!=typeof a?T(e):a}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var U=function(e){!function(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),a&&N(e,a)}(s,e);var a,t,n,o=R(s);function s(){var e;w(this,s);for(var a=arguments.length,t=new Array(a),n=0;n<a;n++)t[n]=arguments[n];return P(T(e=o.call.apply(o,[this].concat(t))),"state",{getLoading:!1,editLoading:!1,deleteLoading:!1,error:!1,errorText:"",deleteModal:!1,id:"",name:"",surname:"",email:"",job_title:"",created:"",modified:"",lastLogin:"",resData:{},emailVerified:!1,status:!1,emailJobApplication:!1,emailMarketing:!1,emailSettings:!1,image:{url:"",icon:"",color:""}}),P(T(e),"catchErrors",(function(a){401===a.response.status?(localStorage.removeItem("react-redux-user-data"),localStorage.removeItem("react-redux-user-data-fullname"),localStorage.removeItem("react-redux-user-data-avatar"),e.props.history.push("/login")):(console.log(a),e.setState({getLoading:!1,editLoading:!1,deleteLoading:!1,error:!0,errorText:a}))})),P(T(e),"closeAlert",(function(){return e.setState({error:!1})})),P(T(e),"editUserSubmit",(function(a){a.preventDefault();var t=T(e).state,n=e.state.resData,r=e.props.history;e.setState({editLoading:!0}),y(t,n).then((function(){var a=e.state,t=a.name,n=a.surname,l=a.image,i="".concat(t," ").concat(n),o=l.url;setTimeout((function(){e.setState({editLoading:!1}),localStorage.setItem("react-redux-user-data-fullname",i),localStorage.setItem("react-redux-user-data-avatar",o),r.push("/profile")}),500)})).catch((function(a){e.catchErrors(a)}))})),P(T(e),"deleteModalClose",(function(){return e.setState({deleteModal:!1})})),P(T(e),"deleteModalOpen",(function(){return e.setState({deleteModal:!0})})),P(T(e),"deleteUserSubmit",(function(){e.setState({deleteLoading:!0});var a=e.state.id;v(a).then((function(){e.setState({deleteLoading:!1}),localStorage.removeItem("react-redux-user-data"),localStorage.removeItem("react-redux-user-data-fullname"),localStorage.removeItem("react-redux-user-data-avatar"),e.props.history.push("/login")})).catch((function(a){return e.catchErrors(a)}))})),P(T(e),"onChange",(function(a){var t,n;"checkbox"===a.target.type?e.setState((P(t={},a.target.name,a.target.checked),P(t,"error",!1),t)):e.setState((P(n={},a.target.name,a.target.value),P(n,"error",!1),n))})),P(T(e),"onChangeCheckbox",(function(a){var t,n=a.target.checked;e.setState((P(t={},a.target.name,!n),P(t,"error",!1),t))})),P(T(e),"onChangeImage",(function(a){return e.setState({image:{url:a.target.value}})})),P(T(e),"deleteImage",(function(){e.setState({image:{url:"",icon:"",color:""}})})),e}return a=s,(t=[{key:"componentDidMount",value:function(){var e,a=this,t=JSON.parse(localStorage.getItem("react-redux-user-data")),n=null==t||null===(e=t.data)||void 0===e?void 0:e.userId;this.setState({getLoading:!0}),_(n).then((function(e){a.setState({getLoading:!1,id:e.data.id,name:e.data.name,surname:e.data.surname,email:e.data.email,job_title:e.data.job_title,image:e.data.image,created:e.data.created,modified:e.data.modified,lastLogin:e.data.lastLogin,emailVerified:e.data.emailVerified,emailJobApplication:e.data.emailJobApplication,emailMarketing:e.data.emailMarketing,emailSettings:e.data.emailSettings,status:e.data.status,resData:e.data})})).catch((function(e){a.catchErrors(e)}))}},{key:"render",value:function(){var e=this.state,a=e.getLoading,t=e.editLoading,n=e.deleteLoading,o=e.error,s=e.errorText,g=e.deleteModal,f=e.id,p=e.name,h=e.surname,E=e.email,b=e.job_title,_=e.created,y=e.modified,v=e.lastLogin,S=e.emailVerified,k=e.status,x=e.emailJobApplication,C=e.emailMarketing,L=e.emailSettings,I=e.image;return r.a.createElement("div",{className:"edit-profile"},r.a.createElement(l.a,null,r.a.createElement("title",null,"React-Redux | Edit Profile")),r.a.createElement(i.a,{color:"danger",isOpen:o,toggle:this.closeAlert},"".concat(s)||""),r.a.createElement(c.a,{className:"delete-modal",overlayClassName:"delete-modal__overlay",isOpen:g,onRequestClose:this.deleteModalClose},n?r.a.createElement(u.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Are you sure?"),r.a.createElement(m.a,null,r.a.createElement(d.a,{color:"secondary",onClick:this.deleteModalClose},"Cancel"),r.a.createElement(d.a,{color:"danger",onClick:this.deleteUserSubmit},"Delete")))),r.a.createElement("h1",null,"Edit profile"),a?"Loading...":r.a.createElement(j,{editLoading:t,id:f,name:p,email:E,image:I,surname:h,created:_,modified:y,job_title:b,lastLogin:v,status:k,emailVerified:S,emailSettings:L,emailMarketing:C,emailJobApplication:x,onChange:this.onChange,deleteModalOpen:this.deleteModalOpen,editUserSubmit:this.editUserSubmit,onChangeImage:this.onChangeImage,deleteImage:this.deleteImage}))}}])&&J(a.prototype,t),n&&J(a,n),s}(n.Component);U.propTypes={history:g.a.object};a.default=U}}]);